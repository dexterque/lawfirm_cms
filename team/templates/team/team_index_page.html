{% extends "base_subpage.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block page_content %}
<div class="team-content" style="padding:30px 0;">
    <div class="team-filters" style="display:flex;align-items:center;gap:15px;margin-bottom:20px;flex-wrap:wrap;">
        <a href="/zhubanlvshi/" style="padding:8px 16px;border:1px solid #ddd;border-radius:18px;color:#333;text-decoration:none;">主办律师</a>
        <a href="/lvshizhurenzhuli/" style="padding:8px 16px;border:1px solid #ddd;border-radius:18px;color:#333;text-decoration:none;">律师主任助理</a>
        <a href="/lvshiyewuzhuli/" style="padding:8px 16px;border:1px solid #ddd;border-radius:18px;color:#333;text-decoration:none;">律师业务助理</a>
        <form method="get" action="" style="margin-left:auto;display:flex;align-items:center;gap:8px;">
            <input type="text" name="q" placeholder="搜索..." style="height:34px;border:1px solid #ddd;border-radius:17px;padding:0 12px;outline:none;">
            <button type="submit" style="height:34px;border:0;background:#bb2924;color:#fff;border-radius:17px;padding:0 16px;cursor:pointer;">搜索</button>
        </form>
    </div>

    {% if members_with_photo %}
    {% with featured=members_with_photo|first %}
    <div class="featured-member" style="display:flex;gap:20px;align-items:center;margin-bottom:30px;flex-wrap:wrap;">
        <div style="flex:0 0 320px;max-width:320px;">
            {% if featured.photo %}
            {% image featured.photo fill-360x430 as feat_img %}
            <img src="{{ feat_img.url }}" alt="{{ featured.title }}" style="width:100%;height:auto;border-radius:10px;">
            {% else %}
            <div style="width:100%;height:430px;background:#f5f5f5;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#999;">暂无照片</div>
            {% endif %}
        </div>
        <div style="flex:1;min-width:260px;">
            <h2 style="margin:0 0 10px 0;font-size:26px;color:#333;">{{ featured.title }}</h2>
            <p style="margin:0 0 12px 0;color:#666;font-size:16px;">{{ featured.position }}</p>
            <a href="{% pageurl featured %}" style="display:inline-block;padding:10px 18px;border:1px solid #bb2924;border-radius:4px;color:#bb2924;text-decoration:none;">查看更多 ></a>
        </div>
    </div>
    {% endwith %}
    {% endif %}

    <div class="team-grid" style="display:flex;flex-wrap:wrap;gap:24px;">
        {% if members_with_photo %}
        {% for member in members_with_photo|slice:"1:" %}
        <div class="team-member" style="width:calc(25% - 18px);min-width:220px;background:#fff;border-radius:10px;border:1px solid #eee;padding:16px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.04);">
            <a href="{% pageurl member %}" style="text-decoration:none;color:#333;display:block;">
                {% if member.photo %}
                {% image member.photo fill-200x260 as member_img %}
                <img src="{{ member_img.url }}" alt="{{ member.title }}" style="width:200px;height:260px;object-fit:cover;border-radius:8px;margin-bottom:12px;">
                {% else %}
                <div style="width:200px;height:260px;background:#f5f5f5;border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px auto;color:#999;">暂无照片</div>
                {% endif %}
                <h3 style="margin:0 0 6px 0;font-size:18px;">{{ member.title }}</h3>
                {% if member.position %}
                <p style="margin:0 0 10px 0;color:#666;font-size:14px;">{{ member.position }}</p>
                {% endif %}
                <span style="color:#bb2924;font-size:14px;">查看更多 ></span>
            </a>
        </div>
        {% endfor %}
        {% else %}
        <div style="padding:40px;text-align:center;color:#999;width:100%;">
            暂无团队成员，敬请期待...
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
